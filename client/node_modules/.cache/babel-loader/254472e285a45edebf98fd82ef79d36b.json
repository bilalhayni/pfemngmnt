{"ast":null,"code":"var _jsxFileName = \"/home/bilal/Downloads/FPN_PFE/client/src/login&Register/login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport { Link } from \"react-router-dom\";\nimport \"./login.css\";\nimport Axios from \"axios\";\nimport { schema } from \"../schemas/login.js\";\nimport { useFormik } from \"formik\";\nimport { useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  Axios.defaults.withCredentials = true;\n  let navigate = useNavigate(); //submit the from & store the Prerequisites in Prerequisites Table\n\n  const onSubmit = (values, actions) => {\n    Axios.post(\"http://localhost:3001/login\", {\n      email: values.email,\n      password: values.password\n    }).then(response => {\n      if (!response.data.message) {\n        // console.log(response);\n        if (response.data[0].role === 0) {\n          navigate(\"/prof/home\");\n        }\n\n        if (response.data[0].role === 1) {\n          navigate(\"/chefdepartement/home\");\n        }\n\n        if (response.data[0].role === 2 && response.data[0].valid === 1) {\n          navigate(\"/student/home\");\n        } else if (response.data[0].role === 2 && response.data[0].valid === 0) {\n          Swal.fire({\n            icon: \"warning\",\n            title: \"Oops...\",\n            text: \"Votre compte n'a pas été activé! Veuillez attendre que l'administrateur activer votre compte\"\n          }).then(() => {\n            window.location.reload();\n          });\n        }\n\n        if (response.data[0].role === 3) {\n          navigate(\"/admin/home\");\n        }\n      }\n\n      if (response.data.message) {\n        // alert(\"Mauvaise combinaison email/mot de passe !\");\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Mauvaise combinaison email/mot de passe !\"\n        }).then(() => {\n          window.location.reload();\n        });\n      }\n    }); // actions.resetForm();\n  };\n\n  const sendPassword = email => {\n    Axios.post(\"http://localhost:3001/reset-password-email\", {\n      email: email\n    }).then(response => {}); // actions.resetForm();\n  };\n\n  async function resetPass() {\n    const {\n      value: email\n    } = await Swal.fire({\n      title: \"Input email address\",\n      input: \"email\",\n      inputLabel: \"Your email address\",\n      inputPlaceholder: \"Enter your email address\"\n    });\n\n    if (email) {\n      sendPassword(email);\n      Swal.fire(`Le mot de passe a été envoyé à: ${email}`);\n    }\n  } //formik\n\n\n  const {\n    values,\n    errors,\n    handleBlur,\n    isSubmitting,\n    handleChange,\n    handleSubmit,\n    touched\n  } = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: schema,\n    onSubmit\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Se connecter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"txt_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"email\",\n            value: values.email,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), errors.email && touched.email && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorLogin\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"txt_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Mot de passe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            value: values.password,\n            onChange: handleChange,\n            onBlur: handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), errors.password && touched.password && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"errorLogin\",\n            children: errors.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pass\",\n          onClick: () => {\n            resetPass();\n          },\n          children: \"Mot de passe oubli\\xE9?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: isSubmitting,\n          type: \"submit\",\n          children: \"Se connecter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"signup_link\",\n          children: [\"Pas un membrer?\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \" S'inscrire \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"O4mwuNCKoRO98xQkAeK+2twSYTE=\", false, function () {\n  return [useNavigate, useFormik];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Link","Axios","schema","useFormik","useNavigate","Swal","Login","defaults","withCredentials","navigate","onSubmit","values","actions","post","email","password","then","response","data","message","role","valid","fire","icon","title","text","window","location","reload","sendPassword","resetPass","value","input","inputLabel","inputPlaceholder","errors","handleBlur","isSubmitting","handleChange","handleSubmit","touched","initialValues","validationSchema"],"sources":["/home/bilal/Downloads/FPN_PFE/client/src/login&Register/login/Login.jsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\nimport \"./login.css\";\nimport Axios from \"axios\";\nimport { schema } from \"../schemas/login.js\";\nimport { useFormik } from \"formik\";\nimport { useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\n\nconst Login = () => {\n  Axios.defaults.withCredentials = true;\n\n  let navigate = useNavigate();\n\n  //submit the from & store the Prerequisites in Prerequisites Table\n  const onSubmit = (values, actions) => {\n    Axios.post(\"http://localhost:3001/login\", {\n      email: values.email,\n      password: values.password,\n    }).then((response) => {\n      if (!response.data.message) {\n        // console.log(response);\n        if (response.data[0].role === 0) {\n          navigate(\"/prof/home\");\n        }\n        if (response.data[0].role === 1) {\n          navigate(\"/chefdepartement/home\");\n        }\n        if (response.data[0].role === 2 && response.data[0].valid === 1) {\n          navigate(\"/student/home\");\n        } else if (\n          response.data[0].role === 2 &&\n          response.data[0].valid === 0\n        ) {\n          Swal.fire({\n            icon: \"warning\",\n            title: \"Oops...\",\n            text: \"Votre compte n'a pas été activé! Veuillez attendre que l'administrateur activer votre compte\",\n          }).then(() => {\n            window.location.reload();\n          });\n        }\n        if (response.data[0].role === 3) {\n          navigate(\"/admin/home\");\n        }\n      }\n      if (response.data.message) {\n        // alert(\"Mauvaise combinaison email/mot de passe !\");\n        Swal.fire({\n          icon: \"error\",\n          title: \"Oops...\",\n          text: \"Mauvaise combinaison email/mot de passe !\",\n        }).then(() => {\n          window.location.reload();\n        });\n      }\n    });\n    // actions.resetForm();\n  };\n\n  const sendPassword = (email) => {\n    Axios.post(\"http://localhost:3001/reset-password-email\", {\n      email: email,\n    }).then((response) => {});\n    // actions.resetForm();\n  };\n\n  async function resetPass() {\n    const { value: email } = await Swal.fire({\n      title: \"Input email address\",\n      input: \"email\",\n      inputLabel: \"Your email address\",\n      inputPlaceholder: \"Enter your email address\",\n    });\n\n    if (email) {\n      sendPassword(email);\n      Swal.fire(`Le mot de passe a été envoyé à: ${email}`);\n    }\n  }\n\n  //formik\n  const {\n    values,\n    errors,\n    handleBlur,\n    isSubmitting,\n    handleChange,\n    handleSubmit,\n    touched,\n  } = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: schema,\n    onSubmit,\n  });\n  return (\n    <div className=\"login\">\n      <div className=\"center\">\n        <h1>Se connecter</h1>\n        <form onSubmit={handleSubmit}>\n          <div className=\"txt_field\">\n            <label>Email</label>\n\n            <input\n              type=\"text\"\n              id=\"email\"\n              value={values.email}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n            {errors.email && touched.email && (\n              <p className=\"errorLogin\">{errors.email}</p>\n            )}\n            {/* <span></span> */}\n          </div>\n          <div className=\"txt_field\">\n            <label>Mot de passe</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={values.password}\n              onChange={handleChange}\n              onBlur={handleBlur}\n            />\n            {errors.password && touched.password && (\n              <p className=\"errorLogin\">{errors.password}</p>\n            )}\n            {/* <span></span> */}\n          </div>\n          <div\n            className=\"pass\"\n            onClick={() => {\n              resetPass();\n            }}\n          >\n            Mot de passe oublié?\n          </div>\n          <button disabled={isSubmitting} type=\"submit\">\n            Se connecter\n          </button>\n          <div className=\"signup_link\">\n            Pas un membrer?\n            <Link to=\"/register\"> S'inscrire </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}